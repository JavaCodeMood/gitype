<div style="text-align:left">
    <h1 class="header">文章管理</h1>

    <div class="labels" style="text-align:left">
        <div class="ui yellow label" id="draft">草稿<div class="detail"></div></div>
        <div class="ui green label" id="normal">正常<div class="detail"></div></div>
    </div>

    <table class="ui compact celled striped table">
        <thead>
            <tr>
                <th>ID</th>
                <th class="six wide">标题</th>
                <th>时间</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
$(document).ready(function(){
    $('table').addClass('loading');
    get({
        'url': adminAPIPrefix+'/posts'
    }).done(function(data, textStatus, jqXHR){
        $.each(data.posts, function(index, elem){
            $.each(elem, function(key, val){
                if (key == 'created'){
                    elem[key] = (new Date(val*1000)).toLocaleString();
                }
            });
        });

        loadTemplate($('table tbody'), $('#posts-template'), data)
    }).fail(function(){
        showMessage('red', '加载文章列表失败');
    }).always(function(){
        $('table').removeClass('loading');
    });
});
</script>

<script id="posts-template" type="x-template-mustache">
{{#posts}}
<tr>
    <td>{{id}}</td>
    <td>{{title}}</td>
    <td>{{created}}</td>
    <td>删除</td>
</tr>
{{/posts}}
</script>
